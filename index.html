<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Keeping scores for games with multiple players" />
  <title>Scoreboard</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="scoreboard-styles.css">
  <script type="module" src="scoreboard.mjs"></script>
</head>

<body>
  <header id="app-header" class="app-header">
    <button id="sidebar-toggle" class="sidebar-toggle" aria-expanded="true" aria-controls="app-sidebar" aria-label="Toggle sidebar">
      <i class="fa-solid fa-xmark" aria-hidden="true"></i>
    </button>
    <h1 id="app-title" class="app-title">SCOREBOARD</h1>
    <div id="app-toolbar" class="app-toolbar">
    </div>
  </header>

  <aside id="app-sidebar" class="app-sidebar collapsed sidebar-actions sidebar-content" role="complementary">
    <!-- Primary actions (most used) -->
    <button id="new-game" aria-label="Create a new game">                           <i class="fa-solid fa-plus" aria-hidden="true"></i>            <span class="label">New Game</span></button>
    <button id="finish-game" aria-label="Finish game and celebrate">                <i class="fa-solid fa-trophy" aria-hidden="true"></i>          <span class="label">Finish Game</span></button>
    <button id="scoreboard-reset" aria-label="Reset scores">                        <i class="fa-solid fa-rotate-right" aria-hidden="true"></i>    <span class="label">Reset Scores</span></button>
    <!-- Persistence actions -->
    <div class="sidebar-sep" role="separator" aria-hidden="true"></div>
    <button id="export-json" aria-label="Export scores">                            <i class="fa-solid fa-download" aria-hidden="true"></i>        <span class="label">Export State</span></button>
    <button id="import-json" aria-label="Import scores">                            <i class="fa-solid fa-upload" aria-hidden="true"></i>          <span class="label">Import State</span></button>
    <button id="save-to-cloud" aria-label="Save to Cloud">                          <i class="fa-solid fa-cloud-arrow-up" aria-hidden="true"></i>  <span class="label">Save to Cloud</span></button>
    <button id="load-from-cloud" aria-label="Load from Cloud">                      <i class="fa-solid fa-cloud-arrow-down" aria-hidden="true"></i><span class="label">Load from Cloud</span></button>
    <button id="list-finished-games" aria-label="List finished games">              <i class="fa-solid fa-list" aria-hidden="true"></i>            <span class="label">Finished Games</span></button>
    <!-- Utilities -->
    <div class="sidebar-sep" role="separator" aria-hidden="true"></div>
    <button id="configure-json" aria-label="Configure">                             <i class="fa-solid fa-gear" aria-hidden="true"></i>            <span class="label">Configure</span></button>
    <button id="auto-sort-toggle" aria-pressed="true" aria-label="Toggle auto-sort"><i class="fa-solid fa-arrows-up-down" aria-hidden="true"></i>  <span class="label">Auto-sort</span></button>
    <button id="theme-toggle" title="Toggle theme">
      <i class="fa-solid fa-sun"></i>
      <span class="label">Switch to Dark Theme</span>
    </button>   
  </aside>

  <main id="app-content" class="app-content" role="main">
    <!-- Default views container -->
    <div id="default-views"></div>

    <!-- Templates for main views -->
    <template id="tpl-generic">
      <h2 class="view-title">Scores</h2>
      <div class="view-toolbar"></div>
      <div class="view-content">
        <ul id="scoreboard-list" class="scoreboard-list" aria-live="polite"></ul>
      </div>
    </template>

    <template id="tpl-duel">
      <h2 class="view-title">7 Wonders Duel</h2>
      <div class="view-toolbar"></div>
      <div class="view-content">
        <div id="seven-wonders-duel-scoreboard" class="columns duel-columns">
          <div class="col icons" aria-hidden="true">
            <i></i>
            <i title="Total Points">∑</i>
            <img src="media/7-wonders-blue-card.png" title="Civilian">
            <img src="media/7-wonders-green-card.png" title="Science">
            <img src="media/7-wonders-yellow-card.png" title="Commercial">
            <img src="media/7-wonders-purple-card.png" title="Guilds">
            <img src="media/7-wonders-piramid-card.png" title="Wonders">
            <img src="media/7-wonders-green-coin-card.png" title="Progress">
            <img src="media/7-wonders-money-coin-card.png" title="Coins">
            <img src="media/7-wonders-military-card.png" title="Military">
          </div>
          <div class="col player" data-player-index="0">
            <div>
              <span data-player-index="0" data-type="name"></span>
              <img src="media/7-wonders-green-coin-card.png" alt="Scientific Domination" class="duel-scientific-victory-icon">
              <img src="media/7-wonders-military-card.png" alt="Military Domination" class="duel-military-victory-icon">
            </div>
            <span data-player-index="0" data-type="sum"></span>
            <counter-input min="0" data-player-index="0" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="green-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="wonders"></counter-input>
            <div class="input-with-toggle">
              <span class="duel-toggle-placeholder" aria-hidden="true"></span>
              <counter-input min="0" data-player-index="0" data-category="green-coins"></counter-input>
              <button type="button" class="duel-victory-toggle" data-player-index="0" data-victory="science" aria-label="Toggle scientific victory" title="Scientific Domination">
                <img src="media/7-wonders-green-coin-card.png" alt="Scientific Domination" class="duel-victory-icon">
              </button>
            </div>
            <counter-input min="0" data-player-index="0" data-category="money-coins"></counter-input>
            <div class="input-with-toggle">
              <span class="duel-toggle-placeholder" aria-hidden="true"></span>
              <counter-input min="0" data-player-index="0" data-category="military"></counter-input>
              <button type="button" class="duel-victory-toggle" data-player-index="0" data-victory="military" aria-label="Toggle military victory" title="Military Domination">
                <img src="media/7-wonders-military-card.png" alt="Military Domination" class="duel-victory-icon">
              </button>
            </div>
          </div>
          <div class="col player" data-player-index="1">
            <div>
              <span data-player-index="1" data-type="name"></span>
              <img src="media/7-wonders-green-coin-card.png" alt="Scientific Domination" class="duel-scientific-victory-icon">
              <img src="media/7-wonders-military-card.png" alt="Military Domination" class="duel-military-victory-icon">
            </div>
            <span data-player-index="1" data-type="sum"></span>
            <counter-input min="0" data-player-index="1" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="green-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="wonders"></counter-input>
            <div class="input-with-toggle">
              <span class="duel-toggle-placeholder" aria-hidden="true"></span>
              <counter-input min="0" data-player-index="1" data-category="green-coins"></counter-input>
              <button type="button" class="duel-victory-toggle" data-player-index="1" data-victory="science" aria-label="Toggle scientific victory" title="Scientific Domination">
                <img src="media/7-wonders-green-coin-card.png" alt="Scientific Domination" class="duel-victory-icon">
              </button>
            </div>
            <counter-input min="0" data-player-index="1" data-category="money-coins"></counter-input>
            <div class="input-with-toggle">
              <span class="duel-toggle-placeholder" aria-hidden="true"></span>
              <counter-input min="0" data-player-index="1" data-category="military"></counter-input>
              <button type="button" class="duel-victory-toggle" data-player-index="1" data-victory="military" aria-label="Toggle military victory" title="Military Domination">
                <img src="media/7-wonders-military-card.png" alt="Military Domination" class="duel-victory-icon">
              </button>
            </div>
          </div>
        </div>
      </div>
    </template>

    <template id="tpl-classic">
      <h2 class="view-title">7 Wonders</h2>
      <div class="view-toolbar"></div>
      <div class="view-content">
        <div id="seven-wonders-classic-scoreboard" class="columns classic-columns">
          <div class="col icons" aria-hidden="true">
            <i></i>
            <i title="Total Points">∑</i>
            <img src="media/7-wonders-military-card.png" title="Military">
            <img src="media/7-wonders-money-coin-card.png" title="Coins">
            <img src="media/7-wonders-piramid-card.png" title="Wonders">
            <img src="media/7-wonders-blue-card.png" title="Civilian">
            <img src="media/7-wonders-yellow-card.png" title="Commercial">
            <img src="media/7-wonders-purple-card.png" title="Guilds">
            <img src="media/7-wonders-green-card.png" title="Science">
          </div>
          <div class="col player" data-player-index="0">
            <span data-player-index="0" data-type="name"></span>
            <span data-player-index="0" data-type="sum"></span>
            <counter-input min="0" data-player-index="0" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="0" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="1">
            <span data-player-index="1" data-type="name"></span>
            <span data-player-index="1" data-type="sum"></span>
            <counter-input min="0" data-player-index="1" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="1" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="2">
            <span data-player-index="2" data-type="name"></span>
            <span data-player-index="2" data-type="sum"></span>
            <counter-input min="0" data-player-index="2" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="2" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="3">
            <span data-player-index="3" data-type="name"></span>
            <span data-player-index="3" data-type="sum"></span>
            <counter-input min="0" data-player-index="3" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="3" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="4">
            <span data-player-index="4" data-type="name"></span>
            <span data-player-index="4" data-type="sum"></span>
            <counter-input min="0" data-player-index="4" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="4" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="5">
            <span data-player-index="5" data-type="name"></span>
            <span data-player-index="5" data-type="sum"></span>
            <counter-input min="0" data-player-index="5" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="5" data-category="green-cards"></counter-input>
          </div>
          <div class="col player" data-player-index="6">
            <span data-player-index="6" data-type="name"></span>
            <span data-player-index="6" data-type="sum"></span>
            <counter-input min="0" data-player-index="6" data-category="military"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="money-coins"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="wonders"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="blue-cards"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="yellow-cards"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="purple-cards"></counter-input>
            <counter-input min="0" data-player-index="6" data-category="green-cards"></counter-input>
          </div>
        </div>
      </div>
    </template>
    </div>

    <template id="tpl-new-game">
      <h2 class="view-title">New Game</h2>
      <div class="view-toolbar">
        <div class="newgame-toolbar-right">
          <button id="new-game-discard" type="button">Discard</button>
          <button id="new-game-create" type="button">Create</button>
        </div>
      </div>
      <div class="view-content">
        <div class="game-type-label">Game Type:</div>
        <div class="game-options">
          <label><input type="radio" name="game-type" value="generic" checked>Generic Game</label>
          <label><input type="radio" name="game-type" value="duel">7 Wonders Duel</label>
          <label><input type="radio" name="game-type" value="classic">7 Wonders Classic</label>
        </div>
        <div class="game-settings">
          <div class="setting" id="generic-game-settings">
            <label for="game-name">Game Name:</label>
            <input type="text" id="game-name" placeholder="My Awesome Game">
            <label for="generic-players">Number of Players:</label>
            <counter-input id="generic-players" min="1" value="2"></counter-input>
          </div>
          <div class="setting" id="duel-game-settings" hidden>
            <!-- No options for 7 Wonders Duel -->
          </div>
          <div class="setting" id="classic-game-settings" hidden>
            <label for="classic-players">Number of Players:</label>
            <counter-input id="classic-players" min="2" max="7" value="3"></counter-input>
          </div>
        </div>
      </div>
    </template>

    <template id="tpl-finished-games">
      <h2 class="view-title">Finished Games</h2>
      <div class="view-toolbar">
        <div class="finished-games-toolbar-right"><button id="finished-games-close" type="button">Close</button></div>
      </div>
      <div class="view-content">
        <div id="finished-games-list" class="game-options" style="flex-direction:column"></div>
      </div>
    </template>

    <template id="tpl-config-editor">
      <h2 class="view-title">Configuration</h2>
      <div class="view-toolbar">
        <div class="config-toolbar-right">
          <button id="config-discard" type="button">Discard</button>
          <button id="config-save" type="button">Save</button>
        </div>
      </div>
      <div class="view-content">
        <textarea id="config-textarea" aria-label="Configuration JSON"></textarea>
      </div>
    </template>

    <template id="score-item-template">
      <li class="score-item">
        <div class="score-controls">
          <button class="decrease" aria-label="Decrease score">
            <i class="fa-solid fa-minus" aria-hidden="true"></i>
          </button>
          <button class="increase" aria-label="Increase score">
            <i class="fa-solid fa-plus" aria-hidden="true"></i>
          </button>
        </div>
        <div class="score-meta">
          <span class="score-name"></span>
          <span class="score-value">0</span>
        </div>
      </li>
    </template>

  </main>
</body>

</html>